"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[3072],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=s(n),m=a,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return n?r.createElement(f,l(l({ref:t},c),{},{components:n})):r.createElement(f,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9721:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return c},default:function(){return d}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),l=["components"],i={},p="Traduction avec npx-translate",s={unversionedId:"angular/traduction-avec-npx-translate",id:"angular/traduction-avec-npx-translate",title:"Traduction avec npx-translate",description:"Documentations :",source:"@site/docs/angular/traduction-avec-npx-translate.md",sourceDirName:"angular",slug:"/angular/traduction-avec-npx-translate",permalink:"/my-docs/docs/angular/traduction-avec-npx-translate",editUrl:"https://github.com/Kenny-54/my-docs/tree/main/docs/angular/traduction-avec-npx-translate.md",tags:[],version:"current",frontMatter:{},sidebar:"angularSidebar",previous:{title:"Projet Angular : \xe9tapes \xe0 suivre",permalink:"/my-docs/docs/angular/projet-angular-etape-a-suivre"},next:{title:"TypeScript",permalink:"/my-docs/docs/angular/typescript"}},c=[{value:"Installation des packages n\xe9cessaires",id:"installation-des-packages-n\xe9cessaires",children:[],level:3},{value:"Mise en place dans le projet Angular",id:"mise-en-place-dans-le-projet-angular",children:[{value:"Fichier app.module.ts",id:"fichier-appmodulets",children:[],level:3},{value:"Dans chaque module",id:"dans-chaque-module",children:[],level:3},{value:"Cr\xe9ation des fichiers de traductions",id:"cr\xe9ation-des-fichiers-de-traductions",children:[],level:3},{value:"Fichier app.component.ts",id:"fichier-appcomponentts",children:[],level:3}],level:2}],u={toc:c};function d(e){var t=e.components,n=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"traduction-avec-npx-translate"},"Traduction avec npx-translate"),(0,o.kt)("p",null,"Documentations : "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/ngx-translate/core"},"https://github.com/ngx-translate/core")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://dev.to/yigitfindikli/primeng-i18n-api-usage-with-ngx-translate-3bh2"},"https://dev.to/yigitfindikli/primeng-i18n-api-usage-with-ngx-translate-3bh2"))),(0,o.kt)("h3",{id:"installation-des-packages-n\xe9cessaires"},"Installation des packages n\xe9cessaires"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"npm install @ngx-translate/core --save\nnpm install @ngx-translate/http-loader --save\n")),(0,o.kt)("p",null,"Le package @ngx-translate/http-loader permet le chargement des fichiers de traduction en HTTP"),(0,o.kt)("h2",{id:"mise-en-place-dans-le-projet-angular"},"Mise en place dans le projet Angular"),(0,o.kt)("h3",{id:"fichier-appmodulets"},"Fichier app.module.ts"),(0,o.kt)("p",null,"Modifier le fichier pour y ajouter"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"la fonction HttpLoaderFactory")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"le TranslateModule dans les imports")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"le TranslateStore dans les providers"),(0,o.kt)("p",{parentName:"li"},"\\"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { HttpClient } from '@angular/common/http';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { AuthInterceptor } from '@core/auth';\nimport { TranslateLoader, TranslateModule, TranslateStore } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\n\n// AoT requires an exported function for factories\nexport function HttpLoaderFactory(http: HttpClient) : TranslateHttpLoader {\n  return new TranslateHttpLoader(http);\n}\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    [...]\n    TranslateModule.forRoot({\n      loader: {\n          provide: TranslateLoader,\n          useFactory: HttpLoaderFactory,\n          deps: [HttpClient]\n      }\n  })\n  ],\n  providers: [\n    TranslateStore\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n")),(0,o.kt)("h3",{id:"dans-chaque-module"},"Dans chaque module"),(0,o.kt)("p",null,"Adapter le fichier du module (xxx.module.ts) de la m\xeame fa\xe7on que dans \u201capp.module.ts\u201d, si ce n\u2019est que dans la section \u201cimports\u201d, on utilise \u201cforChild(\u2026)\u201d au lieu de \u201cforRoot(\u2026)\u201d"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { TranslateLoader, TranslateModule } from '@ngx-translate/core';\nimport { HttpClient } from '@angular/common/http';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\n\n// AoT requires an exported function for factories\nexport function HttpLoaderFactory(http: HttpClient): TranslateHttpLoader {\n  return new TranslateHttpLoader(http);\n}\n\n@NgModule({\n  declarations: [\n    LogComponent\n  ],\n  imports: [\n    CommonModule,\n    [...]\n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: HttpLoaderFactory,\n        deps: [HttpClient]\n      }\n    })\n  ]\n})\nexport class LogModule { }\n")),(0,o.kt)("h3",{id:"cr\xe9ation-des-fichiers-de-traductions"},"Cr\xe9ation des fichiers de traductions"),(0,o.kt)("p",null,"Dans le r\xe9pertoire \u201csrc/assets\u201d, cr\xe9er un r\xe9pertoire \u201ci18n\u201d et y ajouter les fichiers de traductions (un par langue)"),(0,o.kt)("p",null,"Exemple en anglais (fichier en.json)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'{\n  "demo": {\n    "greetings": "Hello!",\n    "en": "English",\n    "fr": "French"\n  }\n}\n')),(0,o.kt)("p",null,"Exemple en fran\xe7ais (fichier fr.json)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'{\n  "demo": {\n    "greetings": "Bonjour!",\n    "en": "Anglaise",\n    "fr": "Fran\xe7ais"\n  }\n}\n')),(0,o.kt)("p",null,"Dans un template HTML, pour \xe9crire du texte qui sera traduit selon la langue choisie (voir section ci-dessous), il suffit de faire"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"<h2 class=\"p-ml-3\">{{ 'demo.greetings' | translate }}</h2>\n")),(0,o.kt)("h3",{id:"fichier-appcomponentts"},"Fichier app.component.ts"),(0,o.kt)("p",null,"Modifier le fichier pour :"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"d\xe9clarer la variable \u201csubscription\u201d (de type \u201cSubscription\u201d)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"modifier le constructeur "),(0,o.kt)("p",{parentName:"li"},"\\"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Component, OnDestroy } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { PrimeNGConfig, Translation } from 'primeng/api';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'app-root',\n  template: `    \n    <router-outlet></router-outlet>\n  `,\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnDestroy {\n  title = 'Front';\n\n  subscription: Subscription;\n\n  constructor(private config: PrimeNGConfig, private translateService: TranslateService) {\n\n    // D\xe9finition des langues disponibles\n    translateService.addLangs(['en', 'fr']);\n\n    // D\xe9finition de la langue par d\xe9faut\n    translateService.setDefaultLang('fr');\n\n    this.subscription = translateService.stream('primeng').subscribe(data => {\n      config.setTranslation(data as Translation);\n    });\n\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n")),(0,o.kt)("p",null,"Pour utiliser et changer de langue dans l\u2019application, il suffit d\u2019appeler la m\xe9thode \u201cuse\u201d du \u201ctranslateService\u201d "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"translateService.use('en');\ntranslateService.use('fr');\n[...]\n")))}d.isMDXComponent=!0}}]);